<!DOCTYPE html>
<html>
<head>
    <title>Laces.js Demo</title>
    <script type="text/javascript" src="../laces.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <style type="text/css">
        .huge {
            font-size: xx-large;
        }
        
        input {
            background-color: white;
        }
    </style>
</head>
<body>
    <p>
        <a href="javascript:model.backgroundColor = 'green';">Green</a>
        <a href="javascript:model.backgroundColor = 'red';">Red</a>
        <a href="javascript:model.backgroundColor = 'yellow';">Yellow</a>
    </p>
    <p id="color-text">Click one of the links, mate!</p>
    <p><button id="huge-toggle">I will make things huge for you...</button></p>
    <p>
        <button id="create-user">Create User</button>
        <button id="delete-user">Delete User</button>
        <input type="text" id="user-name" value="" disabled>
        <button id="update-name" disabled>Update Name</button>
    </p>
    <p>Display name: <span id="display-name"></span></p>

    <script type="text/javascript">
        var model = new LacesModel({
            backgroundColor: "red",
            isRed: function() { return this.backgroundColor === "red"; },
            colorText: function() {
                return this.isRed ? "It's red, dude!" :
                       this.isHuge ? "Dunno, but it's huge!" : "Dunno...";
            },

            isHuge: false,

            user: null,
            displayName: function() {
               return this.user && this.user.name || "Anonymous";
            }
        });

        // color-related bindings
        model.bind("change:backgroundColor", function(event) {
            $("body").css("backgroundColor", event.value);
        });
        model.bind("change:colorText", function(event) {
            $("#color-text").text(event.value);
        });

        // isHuge property binding
        model.bind("change:isHuge", function(event) {
            $("body").toggleClass("huge", event.value);
        });
        $("#huge-toggle").click(function() { model.isHuge = !model.isHuge; });

        // user-related bindings
        model.bind("change:user", function(event) {
            $("#user-name,#update-name").attr("disabled", event.value === null);
        });
        model.bind("change:displayName", function(event) {
            $("#display-name").text(event.value);
        });

        $("#create-user").click(function() { model.user = { "name": "Joe" }; });
        $("#delete-user").click(function() { model.user = null; });
        $("#update-name").click(function() { model.user.name = $("#user-name").val(); });
    </script>
</body>
</html>
